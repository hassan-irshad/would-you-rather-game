(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,n){},126:function(e,t,n){},127:function(e,t,n){},128:function(e,t,n){},129:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(21),s=n.n(o),i=(n(88),n(11)),c=n(12),l=n(15),u=n(13),m=n(16),h=n(14),p=n(81),d=n(17),v=n(7),b={sarahedo:{id:"sarahedo",name:"Sarah Edo",avatarURL:"https://tylermcginnis.com/would-you-rather/sarah.jpg",answers:{"8xf0y6ziyjabvozdd253nd":"optionOne","6ni6ok3ym7mf1p33lnez":"optionTwo",am8ehyc8byjqgar0jgpub9:"optionTwo",loxhs1bqm25b708cmbf3g:"optionTwo"},questions:["8xf0y6ziyjabvozdd253nd","am8ehyc8byjqgar0jgpub9"]},tylermcginnis:{id:"tylermcginnis",name:"Tyler McGinnis",avatarURL:"https://tylermcginnis.com/would-you-rather/tyler.jpg",answers:{vthrdm985a262al8qx3do:"optionOne",xj352vofupe1dqz9emx13r:"optionTwo"},questions:["loxhs1bqm25b708cmbf3g","vthrdm985a262al8qx3do"]},johndoe:{id:"johndoe",name:"John Doe",avatarURL:"https://tylermcginnis.com/would-you-rather/dan.jpg",answers:{xj352vofupe1dqz9emx13r:"optionOne",vthrdm985a262al8qx3do:"optionTwo","6ni6ok3ym7mf1p33lnez":"optionTwo"},questions:["6ni6ok3ym7mf1p33lnez","xj352vofupe1dqz9emx13r"]}},f={"8xf0y6ziyjabvozdd253nd":{id:"8xf0y6ziyjabvozdd253nd",author:"sarahedo",timestamp:1467166872634,optionOne:{votes:["sarahedo"],text:"have horrible short term memory"},optionTwo:{votes:[],text:"have horrible long term memory"}},"6ni6ok3ym7mf1p33lnez":{id:"6ni6ok3ym7mf1p33lnez",author:"johndoe",timestamp:1468479767190,optionOne:{votes:[],text:"become a superhero"},optionTwo:{votes:["johndoe","sarahedo"],text:"become a supervillain"}},am8ehyc8byjqgar0jgpub9:{id:"am8ehyc8byjqgar0jgpub9",author:"sarahedo",timestamp:1488579767190,optionOne:{votes:[],text:"be telekinetic"},optionTwo:{votes:["sarahedo"],text:"be telepathic"}},loxhs1bqm25b708cmbf3g:{id:"loxhs1bqm25b708cmbf3g",author:"tylermcginnis",timestamp:1482579767190,optionOne:{votes:[],text:"be a front-end developer"},optionTwo:{votes:["sarahedo"],text:"be a back-end developer"}},vthrdm985a262al8qx3do:{id:"vthrdm985a262al8qx3do",author:"tylermcginnis",timestamp:1489579767190,optionOne:{votes:["tylermcginnis"],text:"find $50 yourself"},optionTwo:{votes:["johndoe"],text:"have your best friend find $500"}},xj352vofupe1dqz9emx13r:{id:"xj352vofupe1dqz9emx13r",author:"johndoe",timestamp:1493579767190,optionOne:{votes:["johndoe"],text:"write JavaScript"},optionTwo:{votes:["tylermcginnis"],text:"write Swift"}}};function E(e){return new Promise(function(t,n){var a=e.author,r=function(e){var t=e.optionOneText,n=e.optionTwoText,a=e.author;return{id:Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),timestamp:Date.now(),author:a,optionOne:{votes:[],text:t},optionTwo:{votes:[],text:n}}}(e);setTimeout(function(){f=Object(v.a)({},f,Object(d.a)({},r.id,r)),b=Object(v.a)({},b,Object(d.a)({},a,Object(v.a)({},b[a],{questions:b[a].questions.concat([r.id])}))),t(r)},1e3)})}function O(e){return function(e){var t=e.authedUser,n=e.qid,a=e.answer;return new Promise(function(e,r){setTimeout(function(){b=Object(v.a)({},b,Object(d.a)({},t,Object(v.a)({},b[t],{answers:Object(v.a)({},b[t].answers,Object(d.a)({},n,a))}))),f=Object(v.a)({},f,Object(d.a)({},n,Object(v.a)({},f[n],Object(d.a)({},a,Object(v.a)({},f[n][a],{votes:f[n][a].votes.concat([t])}))))),e()},500)})}(e)}var g="RECIEVE_USERS",j="SAVE_USER_QUESTION",y="SAVE_USER_ANSWER";var w="RECEIVE_QUESTIONS",q="SAVE_QUESTION",T="SAVE_QUESTION_ANSWER";function x(){return function(e){return Promise.all([new Promise(function(e,t){setTimeout(function(){return e(Object(v.a)({},b))},1e3)}),new Promise(function(e,t){setTimeout(function(){return e(Object(v.a)({},f))},1e3)})]).then(function(e){var t=Object(p.a)(e,2);return{users:t[0],questions:t[1]}}).then(function(t){var n=t.users,a=t.questions;e(function(e){return{type:g,users:e}}(n)),e(function(e){return{type:w,questions:e}}(a))})}}function k(e,t,n){var a={author:e,optionOneText:t,optionTwoText:n};return function(e){return function(e){return E(e)}(a).then(function(t){var n,a;e({type:q,question:t}),e((n=t.author,a=t.id,{type:j,user:n,qid:a}))})}}function C(e,t,n){return function(a){return a(function(e,t,n){return{type:T,authedUser:e,qid:t,answer:n}}(e,t,n)),a(function(e,t,n){return{type:y,user:e,qid:t,answer:n}}(e,t,n)),O({authedUser:e,qid:t,answer:n})}}var S=n(27),U=n.n(S),A=n(48),N=n.n(A),R=n(133),I="SET_AUTHED_USER",z="DELETE_AUTHED_USER";var L={isAuthenticated:!1,authenticate:function(e){this.isAuthenticated=!0,setTimeout(e,100)},signout:function(e){this.isAuthenticated=!1,setTimeout(e,100)}},_=n(34),V=(n(93),function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={userId:null,redirectToReferrer:!1},n.handleChange=function(e){n.setState({userId:e.target.value})},n.login=function(e){var t;e.preventDefault(),L.authenticate(function(){n.setState({redirectToReferrer:!0})}),n.props.dispatch((t=n.state.userId,{type:I,id:t}))},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state.redirectToReferrer,t=(this.props.location.state||{from:{pathname:"/"}}).from;return!0===e?r.a.createElement(_.a,{to:t}):r.a.createElement("div",{className:"box"},r.a.createElement(U.a,{className:"card-login"},r.a.createElement(U.a.Header,{className:"card-login-header",as:"h5"},"Would You Rather Game"),r.a.createElement(U.a.Body,{className:"card-login-body"},r.a.createElement(U.a.Title,null,"Sign In to begin the game"),r.a.createElement(R.a,null,r.a.createElement(R.a.Group,{controlId:"users"},r.a.createElement(R.a.Control,{as:"select",onChange:this.handleChange},r.a.createElement("option",{hidden:!0,value:"default"},"Username"),this.props.users.map(function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement(N.a,{variant:"warning",onClick:this.login},"Sign in")))))}}]),t}(a.Component));var Q=Object(h.b)(function(e){var t=e.users;return{users:Object.keys(t)}})(V),D=n(25),W=n(134),B=n(137),P=n(130),G=n(135),H=(n(103),function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).logout=function(){n.props.dispatch({type:z,id:""})},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.loggedInUser;return""===this.props.authedUser?r.a.createElement(_.a,{to:"/login"}):r.a.createElement(W.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark"},r.a.createElement(W.a.Brand,{href:"#home"},"Would You Rather"),r.a.createElement(W.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(W.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(B.a,{className:"mr-auto"},r.a.createElement(D.b,{className:"nav-link",to:"/"},"Home"),r.a.createElement(D.b,{className:"nav-link",to:"/add"},"New Question"),r.a.createElement(D.b,{className:"nav-link",to:"/leaderboard"},"Leaderboard")),r.a.createElement(B.a,null,r.a.createElement(P.a,{src:e.avatarURL,rounded:!0}),r.a.createElement(G.a,{title:"Hello, "+e.name,id:"basic-nav-dropdown"},r.a.createElement(G.a.Item,{onClick:this.logout},"Logout")))))}}]),t}(a.Component));var J=Object(h.b)(function(e){var t=e.authedUser;return{loggedInUser:e.users[t],authedUser:t}})(H),M=n(131),Y=n(136),K=n(78),$=(n(126),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(Y.a,{className:"card-view"},r.a.createElement(Y.a.Img,{className:"card-view-img",variant:"top",src:this.props.questionAuthor.avatarURL}),r.a.createElement(Y.a.Body,null,r.a.createElement(Y.a.Title,null,this.props.questionAuthor.name," asks"),r.a.createElement(Y.a.Text,null,"Would you rather"),r.a.createElement(D.b,{to:"/questions/".concat(this.props.ques.id)},r.a.createElement(K.a,{variant:"warning",block:!0,onClick:this.routeChange},"View Poll"))))}}]),t}(a.Component));var F=Object(h.b)(function(e,t){return{questionAuthor:e.users[t.ques.author]}})($),X=(n(127),function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={questionSwitch:!1},n.handleChangeAnswered=function(){n.setState({questionSwitch:!0})},n.handleChangeUnAnswered=function(){n.setState({questionSwitch:!1})},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(J,null),r.a.createElement(M.a,null,r.a.createElement("div",{className:"list-box"},r.a.createElement(B.a,{justify:!0,variant:"tabs",defaultActiveKey:"link-1"},r.a.createElement(B.a.Item,null,r.a.createElement(B.a.Link,{eventKey:"link-1",onClick:this.handleChangeUnAnswered},"Unanswered")),r.a.createElement(B.a.Item,null,r.a.createElement(B.a.Link,{eventKey:"link-2",onClick:this.handleChangeAnswered},"Answered"))),!1===this.state.questionSwitch?this.props.unAnsweredQuestions.map(function(e){return r.a.createElement(F,{key:e.id,ques:e})}):this.props.answeredQuestions.map(function(e){return r.a.createElement(F,{key:e.id,ques:e})}))))}}]),t}(a.Component));var Z=Object(h.b)(function(e){var t=e.users,n=e.questions,a=e.authedUser,r=Object.values(n),o=t[a],s=o?Object.keys(o.answers):[];return{answeredQuestions:r.filter(function(e){return s.includes(e.id)}).sort(function(e,t){return t.timestamp-e.timestamp}),unAnsweredQuestions:r.filter(function(e){return!s.includes(e.id)}).sort(function(e,t){return t.timestamp-e.timestamp})}})(X),ee=(n(55),function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={option1:null,option2:null},n.handleChange1=function(e){n.setState({option1:e.target.value})},n.handleChange2=function(e){n.setState({option2:e.target.value})},n.onSubmit=function(e){e.preventDefault(),n.props.dispatch(k(n.props.authedUser,n.state.option1,n.state.option2)),n.props.history.push("/")},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(J,null),r.a.createElement(M.a,null,r.a.createElement("div",{className:"question-view-box"},r.a.createElement(U.a,null,r.a.createElement(U.a.Body,null,r.a.createElement(U.a.Title,null,"Would you Rather..."),r.a.createElement(R.a,null,r.a.createElement(R.a.Group,{controlId:"users"},r.a.createElement(R.a.Control,{onChange:this.handleChange1,type:"text",placeholder:"Option 1"}),r.a.createElement("span",null,"Or"),r.a.createElement(R.a.Control,{onChange:this.handleChange2,type:"text",placeholder:"Option 2"})),r.a.createElement(N.a,{variant:"warning",onClick:this.onSubmit,block:!0},"Add")))))))}}]),t}(a.Component));var te=Object(h.b)(function(e){return{authedUser:e.authedUser}})(ee),ne=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.user;return r.a.createElement(Y.a,{className:"card-view"},r.a.createElement(Y.a.Img,{className:"card-view-img",variant:"top",src:e.avatarURL}),r.a.createElement(Y.a.Body,null,r.a.createElement(Y.a.Title,null,e.name),r.a.createElement("div",{className:"cell"},"Answered Questions: ",Object.keys(e.answers).length),r.a.createElement("div",{className:"cell"},"Created Question: ",e.questions.length),r.a.createElement("div",{className:"cell"},"Score: ",Object.keys(e.answers).length+e.questions.length)))}}]),t}(a.Component),ae=(n(128),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(J,null),r.a.createElement(M.a,null,r.a.createElement("div",{className:"leaderboard"},this.props.sortedUsers.map(function(e){return r.a.createElement(ne,{key:e.id,user:e})}))))}}]),t}(a.Component));var re=Object(h.b)(function(e){var t=e.users;return{sortedUsers:Object.values(t).sort(function(e,t){var n=Object.keys(e.answers).length+e.questions.length;return Object.keys(t.answers).length+t.questions.length-n})}})(ae),oe=n(73),se=n(132),ie=n(138),ce=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={selectedValue:null},n.handleChange=function(e){n.setState({selectedValue:e.target.value})},n.onSubmit=function(e){e.preventDefault(),n.props.dispatch(C(n.props.authedUser,n.props.match.params.id,n.state.selectedValue))},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){if(this.props.error)return r.a.createElement(M.a,null,r.a.createElement(oe.a,null,r.a.createElement("h1",null,"404"),r.a.createElement("p",null,"The page not found")));var e=this.props.q?this.props.q:"",t=this.props.q?this.props.q.optionOne.votes.includes(this.props.authedUser):null,n=this.props.q?this.props.q.optionTwo.votes.includes(this.props.authedUser):null;return r.a.createElement("div",null,r.a.createElement(J,null),r.a.createElement(M.a,null,r.a.createElement("div",{className:"question-view-box"},!0===t||!0===n?r.a.createElement(Y.a,null,r.a.createElement(Y.a.Img,{variant:"top",src:this.props.author.avatarURL}),r.a.createElement(Y.a.Body,null,r.a.createElement(Y.a.Title,null,"Asked by ",this.props.author.name),r.a.createElement(Y.a.Text,null,"Results:"),r.a.createElement("div",null,r.a.createElement("div",{className:"cell"},r.a.createElement("div",null,t?r.a.createElement(se.a,{pill:!0,variant:"warning"},"Your Vote"):" "),"Would you rather ",e?e.optionOne.text:"",r.a.createElement(ie.a,{now:e?e.optionOne.votes.length/(e.optionOne.votes.length+e.optionTwo.votes.length)*100:"",label:"".concat(e?e.optionOne.votes.length/(e.optionOne.votes.length+e.optionTwo.votes.length)*100:"","%")}),r.a.createElement("p",null,e?"".concat(e.optionOne.votes.length," out of ").concat(e.optionTwo.votes.length+e.optionOne.votes.length):" ")),r.a.createElement("div",{className:"cell"},r.a.createElement("div",null,n?r.a.createElement(se.a,{pill:!0,variant:"warning"},"Your Vote"):" "),"Would you rather ",e?e.optionTwo.text:"",r.a.createElement(ie.a,{now:e?e.optionOne.votes.length/(e.optionOne.votes.length+e.optionTwo.votes.length)*100:"",label:"".concat(this.props.q?e.optionTwo.votes.length/(e.optionOne.votes.length+e.optionTwo.votes.length)*100:"","%")}),r.a.createElement("p",null,e?"".concat(e.optionTwo.votes.length," out of ").concat(e.optionTwo.votes.length+e.optionOne.votes.length):" "))))):r.a.createElement(Y.a,{className:"card-view"},r.a.createElement(Y.a.Img,{className:"card-view-img",variant:"top",src:this.props.author.avatarURL}),r.a.createElement(Y.a.Body,null,r.a.createElement(Y.a.Title,null,this.props.author.name," asks"),r.a.createElement(Y.a.Text,null,"Would you rather"),r.a.createElement(R.a.Group,null,r.a.createElement("div",{className:"mb-3"},r.a.createElement(R.a.Check,{type:"radio",name:"select",label:e?e.optionOne.text:"",onChange:this.handleChange,value:"optionOne"}),r.a.createElement(R.a.Check,{type:"radio",name:"select",label:e?e.optionTwo.text:"",onChange:this.handleChange,value:"optionTwo"}))),r.a.createElement(K.a,{variant:"warning",block:!0,onClick:this.onSubmit},"Submit"))))))}}]),t}(a.Component);var le=Object(h.b)(function(e,t){var n=e.users,a=e.questions,r=e.authedUser,o=t.match;if(void 0===a[o.params.id])return{error:!0};var s=a[o.params.id],i=s?n[s.author]:"";return{q:a[o.params.id],author:i,authedUser:r}})(ce),ue=n(82),me=function(e){var t=e.component,n=Object(ue.a)(e,["component"]);return r.a.createElement(_.b,Object.assign({},n,{render:function(e){return!0===L.isAuthenticated?r.a.createElement(t,e):r.a.createElement(_.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},he=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(x())}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(D.a,{basename:"/would-you-rather-game"},r.a.createElement(me,{path:"/",exact:!0,component:Z}),r.a.createElement(me,{path:"/add",component:te}),r.a.createElement(me,{path:"/leaderboard",component:re}),r.a.createElement(_.b,{path:"/login",exact:!0,component:Q}),r.a.createElement(me,{path:"/questions/:id",component:le})))}}]),t}(a.Component),pe=Object(h.b)()(he),de=n(29),ve=n(80);var be=Object(de.c)({authedUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:case z:return t.id;default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(v.a)({},e,t.users);case y:return Object(v.a)({},e,Object(d.a)({},t.user,Object(v.a)({},e[t.user],{answers:Object(v.a)({},e[t.user].answers,Object(d.a)({},t.qid,t.answer))})));case j:return Object(v.a)({},e,Object(d.a)({},t.user,Object(v.a)({},e[t.user],{questions:[].concat(Object(ve.a)(e[t.user].questions),[t.qid])})));default:return e}},questions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(v.a)({},e,t.questions);case q:return Object(v.a)({},e,Object(d.a)({},t.question.id,t.question));case T:var n=e[t.qid][t.answer].votes;return Object(v.a)({},e,Object(d.a)({},t.qid,Object(v.a)({},e[t.qid],Object(d.a)({},t.answer,Object(v.a)({},e[t.qid][t.answer],{votes:n.concat([t.authedUser])})))));default:return e}}}),fe=n(79),Ee=function(e){return function(t){return function(n){console.group(n.type),console.log("The action: ",n);var a=t(n);return console.log("The new state: ",e.getState()),console.groupEnd(),a}}},Oe=Object(de.a)(fe.a,Ee),ge=Object(de.d)(be,Oe);s.a.render(r.a.createElement(h.a,{store:ge},r.a.createElement(pe,null)),document.getElementById("root"))},55:function(e,t,n){},83:function(e,t,n){e.exports=n(129)},88:function(e,t,n){},93:function(e,t,n){}},[[83,1,2]]]);
//# sourceMappingURL=main.2768a6f3.chunk.js.map